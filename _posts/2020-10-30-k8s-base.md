---
layout: post
keywords: k8s 
description: kubernetes's base 
title: "kubernetes"
categories: [云原生]
tags: [k8s,kubernetes,crd,resource]
---
{% include codepiano/setup %}

## resources

> k8s中pod、Role、config这些都是 resources

### resources documents

#### common

* apiVersion
* kind
* metadata

#### pod/Service/ReplicaSet/metadata

* spec
* status

## Workloads

* Pods
* Workload Resources
  * Deployments
  * ReplicaSet
  * DaemonSet

> 什么场景使用？ ensures that all (or some) Nodes run a copy of a Pod.
>
> * running a cluster storage daemon on every node
> * running a logs collection daemon on every node
> * running a node monitoring daemon on every node

## ConfigMap

## Secrets

## event

## ingress

## service

> Secrets let you store and manage sensitive information, such as passwords, OAuth tokens, and ssh keys.

## RBAC Authorization

> [rbac](https://kubernetes.io/docs/reference/access-authn-authz/rbac/)

### Role

* A Role always sets permissions within a particular namespace

### ClusterRole

* ClusterRoles have several uses

### RoleBinding

### ClusterRoleBinding

* binding

## Controller Pattern

> desired state: controller making the current state come closer to desired state

## kubeconfig & serviceAccount

> * 优缺点，如何使用，跨集群如何使用
> * k8s的架构非常灵活，基本可以在任何地方通过和API交互做很多control的工作

## Workload

* Deployment and ReplicaSet
* StatefulSet
* DaemonSet
* Job and CronJob
* Garbage colletion
* time-to-live after finished controller(removes Jobs once a defined time has passed since they completed.
)

## Scheduler

> Scheduler Watches新建未被分配到Node上的pod。
>
> * kube-scheduler is default scheduler
> * Filtering
> * Scoring
>
> include individual and collective resource requirements, hardware / software / policy constraints, affinity and anti-affinity specifications, data locality, inter-workload interference, and so on.
>
> * 两种方法可以配置调度器的过滤和打分
>   * Scheduling Policies configure Predicates for filtering and Priorities for scoring.
>   * Scheduling Profiles configure Plugins:QueueSort, Filter, Score, Bind, Reserve, Permit, and others

### Scheduling Framework
>
> a pluggable architecture for Kubernetes Scheduler that makes scheduler customizations easy.
> 怎么编译、部署？ 单独部署还是和原有调度器一起部署

## Nodes

> * kubelet
> * runtime
> * kube-proxy

### Node controller

> * assigning a CIDR block to the node
> * keeping the node controller's internal list of nodes up to date
> * monitoring the nodes' health
